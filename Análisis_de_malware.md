# Análisis estático de malware

  En el análisis estático, examinamos una muestra sin ejecutarla. La cantidad de información
  que se puede obtener de esta manera es grande, desde algo tan simple como el nombre del
  archivo hasta lo más complejo, como las firmas especializadas de YARA. Vamos a cubrir una
  selección de la gran variedad de características que se pueden obtener analizando estáticamente una muestra.
  A pesar de su poder y conveniencia, el análisis estático no es una bala de plata, principalmente porque
  el software puede ser ofuscado. Por esta razón, emplearemos el análisis dinámico y
  otras técnicas.
  
## Calcular el hash de una muestra

  Sin entrar en los detalles del hash, un hash es esencialmente una firma de cadena corta y única. 
  Por ejemplo, podemos hacer un hash de la secuencia de bytes de un archivo para obtener un
  código esencialmente único para ese archivo. Esto nos permite comparar rápidamente dos archivos para ver
  si son idénticos.
  
  Existen muchos procedimientos hash, así que nos centraremos en los más importantes,
  a saber, SHA256 y MD5. Tenga en cuenta que se sabe que MD5 presenta vulnerabilidades debido a las colisiones de hash
  colisiones, es decir, casos en los que dos objetos diferentes tienen el mismo hash y, por lo tanto, debe
  utilizarse con precaución. En esta tarea, tomamos un archivo ejecutable y calculamos sus hash MD5 y
  SHA256.
  
### Preparación
  La preparación para esta tarea consiste en descargar un archivo de prueba, que es el ejecutable de Python3
  https://www.python.org/ftp/python/3.7.2/python-3.7.2-amd64.exe
  
### Cómo hacerlo
    En los siguientes pasos, veremos cómo obtener el hash de un archivo:
    1. Comience importando las bibliotecas y seleccionando el archivo que desea obtener el hash:
```sh
      import sys
      importar hashlib

      filename = "python-3.7.2-amd64.exe"
    
    ```
    2. Instanciar los objetos MD5 y SHA256, y especificar el tamaño de los trozos que leeremos:

```sh
      BUF_SIZE = 65536
      md5 = hashlib.md5()
      sha256 = hashlib.sha256()
```
    
3. A continuación, leemos el archivo en trozos de 64 KB y construimos incrementalmente nuestros hashes:

```sh
      with open(filename, "rb") as f:
          while True:
              data = f.read(BUF_SIZE)
              if not data:
                  break
              md5.update(data)
              sha256.update(data)
```sh

4. Por último, imprime los hashes resultantes:

```sh
  print("MD5: {0}".format(md5.hexdigest()))
  print("SHA256: {0}".format(sha256.hexdigest()))
```

## Cómo funciona

### explicacion los pasos que se han proporcionado:

  En el paso 1, importamos hashlib, una biblioteca estándar de Python para el cálculo de hash.
  También especificamos el archivo al que le vamos a aplicar el hash, en este caso, el archivo es python-3.7.2-amd64.exe.

  En el paso 2, instanciamos un objeto md5 y un objeto sha256 y especificamos el tamaño de los fragmentos que vamos a leer.

  En el paso 3, utilizamos el método .update(data). Este método permite calcular el hash de forma incremental porque calcula el hash de la
  concatenación. En otras palabras, hash.update(a) seguido de hash.update(b) es equivalente a hash.update(a+b).

  En el paso 4, imprimimos los hashes en dígitos hexadecimales.

  También podemos verificar que nuestro cálculo es consistente con los cálculos de hash dados por otras fuentes, como VirusTotal y 
  el sitio web oficial de Python. El hash MD5 se muestra en la página web de Python (https://www.python.org/ftp/python/3.7.2/python-3.7.2-amd64.exe)
